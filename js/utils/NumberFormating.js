let LOG5E=.6213349345596119;function commaFormat(t,r){if(null==t)return"NaN";if((t.array?t.array[0][1]:t)<.001)return(0).toFixed(r);let e=t.toString().split(".");return e[0]=e[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),e[0]}function regularFormat(t,r){if(isNaN(t))return"NaN";if((t.array?t.array[0][1]:t)<.001)return(0).toFixed(r);let e=t.toString(),a=e.split(".");return 0==r?commaFormat(t.floor?t.floor():Math.floor(t)):1==a.length?e+"."+"0".repeat(r):a[1].length<r?e+"0".repeat(r-a[1].length):a[0]+"."+a[1].substring(0,r)}function polarize(t,r=!1){0==t.length&&(t=[[0,0]]);let e=0==t[0][0]?t[0][1]:10,a=0,o=0;if(Number.isFinite(e))if(t.length<=1&&0==t[0][0])for(;r&&e>=10;)e=Math.log10(e),a+=1,o=1;else{let l=0==t[0][0]?1:0;for(a=t[l][1],o=t[l][0];e>=10||l<t.length||r&&a>=10;)if(e>=10){if(1==o)(e=Math.log10(e))>=10&&(e=Math.log10(e),a+=1);else if(o<50)for(e=e>=1e10?Math.log10(Math.log10(Math.log10(e)))+2:Math.log10(Math.log10(e))+1,i=2;i<o;i++)e=Math.log10(e)+1;else e=1;a+=1}else{if(l==t.length-1&&t[l][0]==o&&!(r&&a>=10))break;if(e=Math.log10(e)+a,o+=1,l<t.length&&o>t[l][0]&&(l+=1),l<t.length)if(o==t[l][0])a=t[l][1]+1;else if(e<10){let r=t[l][0]-o;if(r<50)for(i=0;i<r;i++)e=Math.log10(e)+1;else e=1;o=t[l][0],a=t[l][1]+1}else a=1;else a=1}}else;return{bottom:e,top:a,height:o}}function arraySearch(t,r){for(i=0;i<t.length;i++){if(t[i][0]==r)return t[i][1];if(t[i][0]>r)break}return r>0?0:10}function setToZero(t,r){for(i=0;i<t.length&&t[i][0]!=r;i++);i<t.length&&(t[i][1]=0)}function format(t,r=4,e=!1){r=(r==2?4:r);if(ExpantaNum.isNaN(t))return"NaN";let a=Math.max(4,r),o=Math.max(6,r),l=Math.max(7,r),i=(t=new ExpantaNum(t)).array;if(t.abs().lt(1e-308))return(0).toFixed(r);if(t.sign<0)return"-"+format(t.neg(),r);if(t.isInfinite())return"Infinity";if(t.lt("0.0001"))return format(t.rec(),r)+"⁻¹";if(t.lt(1))return regularFormat(t,r+(e?2:0));if(t.lt(1e3))return regularFormat(t,r);if(t.lt(1e12))return commaFormat(t);if(t.lt("10^^5")){let t=arraySearch(i,0),r=arraySearch(i,1)-1;t>=1e9&&(t=Math.log10(t),r+=1);let e=10**(t-Math.floor(t)),o=Math.floor(t),l=t<1e3?a:a-Math.floor(Math.log10(t)/1.6)+2;return"e".repeat(r)+regularFormat(e,l)+"e"+commaFormat(o)}if(t.lt("10^^e9")){let t=polarize(i),r=t.top<1e3?o:o-Math.floor(Math.log10(t.top))+2;return regularFormat(t.bottom,r)+"F"+commaFormat(t.top)}if(t.lt("10^^^5")){let e=arraySearch(i,2);if(e>=1)return setToZero(i,2),"F".repeat(e)+format(i,r);let a=arraySearch(i,1)+1;return t.gte("10^^"+(a+1))&&(a+=1),"F"+format(a,r)}if(t.lt("10^^^e6")){let t=polarize(i);return regularFormat(t.bottom,o)+"G"+commaFormat(t.top)}if(t.lt("10{4}5")){let e=arraySearch(i,3);if(e>=1)return setToZero(i,3),"G".repeat(e)+format(i,r);let a=arraySearch(i,2)+1;return t.gte("10^^^"+(a+1))&&(a+=1),"G"+format(a,r)}if(t.lt("10{4}e6")){let t=polarize(i);return regularFormat(t.bottom,o)+"H"+commaFormat(t.top)}if(t.lt("10{5}5")){let e=arraySearch(i,4);if(e>=1)return setToZero(i,4),"H".repeat(e)+format(i,r);let a=arraySearch(i,3)+1;return t.gte("10^^^^"+(a+1))&&(a+=1),"H"+format(a,r)}if(t.lt("Je6")){let t=polarize(i,!0);return regularFormat(Math.log10(t.bottom)+t.top,l)+"J"+commaFormat(t.height)}if(t.lt("J^4 10")){let e=t.layer;if(e>=1)return"J".repeat(e)+format(i,r);let a=i[i.length-1][0];return t.gte("J"+(a+1))&&(a+=1),"J"+format(a,r)}if(t.lt("J^999999 10")){let r,e=polarize(i,!0),a=new ExpantaNum(i),o=t.layer;if(a.lt("10^^10"))r=1+Math.log10(Math.log10(e.bottom)+e.top),o+=1;else if(a.lt("10{10}10"))r=e.height+Math.log((Math.log10(e.bottom)+e.top)/2)*LOG5E,o+=1;else{let t=e.height+Math.log((Math.log10(e.bottom)+e.top)/2)*LOG5E,a=t>=1e10?Math.log10(Math.log10(t)):Math.log10(t),l=t>=1e10?2:1;r=1+Math.log10(Math.log10(a)+l),o+=2}return regularFormat(r,l)+"K"+commaFormat(o)}let n=t.layer+1;return t.gte("J^"+n+" 10")&&(n+=1),"K"+format(n,r)}function formatWhole(t){return format(t,0)}function formatSmall(t,r=2){return format(t,r,!0)}function formatTime(t){t=t*1000;let r=(Math.floor(t%6e4)/1e3).toString()+" seconds";return t>6e4&&(r=Math.floor(t/6e4%60).toString()+" minutes and "+r),t>36e5&&(r=Math.floor(t/36e5%24).toString()+" hours, "+r),t>432e5&&(r=Math.floor(t/432e5%24).toString()+" days, "+r),r}